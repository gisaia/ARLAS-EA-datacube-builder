#!/bin/sh

curl -X POST -H "Content-Type: application/json" -d '{
    "composition": [
        {
            "rasters": [
                {
                    "type": {
                        "format": "L1C-Pivot",
                        "source": "Sentinel2"
                    },
                    "path": "PRODUCT_S2A_MSI__L1C_20180424T110609_3nek.tar",
                    "id": "PRODUCT_S2A_MSI__L1C_20180424T110609_3nek"
                },
                {
                    "type": {
                        "format": "L1C-Pivot",
                        "source": "Sentinel2"
                    },
                    "path": "PRODUCT_S2A_MSI__L1C_20180424T110609_s62i.tar",
                    "id": "PRODUCT_S2A_MSI__L1C_20180424T110609_s62i"
                }
            ],
            "timestamp": 1524567969
        },
        {
            "rasters": [
                {
                    "type": {
                        "format": "L1C-Pivot",
                        "source": "Sentinel2"
                    },
                    "path": "PRODUCT_S2B_MSI__L1C_20181023T105107_bb5z.tar",
                    "id": "PRODUCT_S2B_MSI__L1C_20181023T105107_bb5z"
                },
                {
                    "type": {
                        "format": "L1C-Pivot",
                        "source": "Sentinel2"
                    },
                    "path": "PRODUCT_S2B_MSI__L1C_20181023T105107_uxol.tar",
                    "id": "PRODUCT_S2B_MSI__L1C_20181023T105107_uxol"
                }
            ],
            "timestamp": 1540291867
        },
        {
            "rasters": [
                {
                    "type": {
                        "format": "L1C-Pivot",
                        "source": "Sentinel2"
                    },
                    "path": "PRODUCT_S2B_MSI__L1C_20190501T105819_ddxq.tar",
                    "id": "PRODUCT_S2B_MSI__L1C_20190501T105819_ddxq"
                },
                {
                    "type": {
                        "format": "L1C-Pivot",
                        "source": "Sentinel2"
                    },
                    "path": "PRODUCT_S2B_MSI__L1C_20190501T105819_rvzr.tar",
                    "id": "PRODUCT_S2B_MSI__L1C_20190501T105819_rvzr"
                }
            ],
            "timestamp": 1556708299
        },
        {
            "rasters": [
                {
                    "type": {
                        "format": "L1C-Pivot",
                        "source": "Sentinel2"
                    },
                    "path": "PRODUCT_S2B_MSI__L1C_20191011T105954_3mnl.tar",
                    "id": "PRODUCT_S2B_MSI__L1C_20191011T105954_3mnl"
                },
                {
                    "type": {
                        "format": "L1C-Pivot",
                        "source": "Sentinel2"
                    },
                    "path": "PRODUCT_S2B_MSI__L1C_20191011T105954_81rm.tar",
                    "id": "PRODUCT_S2B_MSI__L1C_20191011T105954_81rm"
                }
            ],
            "timestamp": 1570791594
        },
        {
            "rasters": [
                {
                    "type": {
                        "format": "L1C-Pivot",
                        "source": "Sentinel2"
                    },
                    "path": "PRODUCT_S2A_MSI__L1C_20200311T105739_ad9n.tar",
                    "id": "PRODUCT_S2A_MSI__L1C_20200311T105739_ad9n"
                },
                {
                    "type": {
                        "format": "L1C-Pivot",
                        "source": "Sentinel2"
                    },
                    "path": "PRODUCT_S2A_MSI__L1C_20200311T105739_asfl.tar",
                    "id": "PRODUCT_S2A_MSI__L1C_20200311T105739_asfl"
                }
            ],
            "timestamp": 1583924259
        },
        {
            "rasters": [
                {
                    "type": {
                        "format": "L1C-Pivot",
                        "source": "Sentinel2"
                    },
                    "path": "PRODUCT_S2A_MSI__L1C_20200930T110452_1s8e.tar",
                    "id": "PRODUCT_S2A_MSI__L1C_20200930T110452_1s8e"
                },
                {
                    "type": {
                        "format": "L1C-Pivot",
                        "source": "Sentinel2"
                    },
                    "path": "PRODUCT_S2A_MSI__L1C_20200930T110452_4o9d.tar",
                    "id": "PRODUCT_S2A_MSI__L1C_20200930T110452_4o9d"
                }
            ],
            "timestamp": 1601463892
        },
        {
            "rasters": [
                {
                    "type": {
                        "format": "L1C-Pivot",
                        "source": "Sentinel2"
                    },
                    "path": "PRODUCT_S2A_MSI__L1C_20210418T110258_2twm.tar",
                    "id": "PRODUCT_S2A_MSI__L1C_20210418T110258_2twm"
                },
                {
                    "type": {
                        "format": "L1C-Pivot",
                        "source": "Sentinel2"
                    },
                    "path": "PRODUCT_S2A_MSI__L1C_20210418T110258_4i3c.tar",
                    "id": "PRODUCT_S2A_MSI__L1C_20210418T110258_4i3c"
                }
            ],
            "timestamp": 1618743778
        },
        {
            "rasters": [
                {
                    "type": {
                        "format": "L1C-Pivot",
                        "source": "Sentinel2"
                    },
                    "path": "PRODUCT_S2B_MSI__L1C_20211027T105044_aocs.tar",
                    "id": "PRODUCT_S2B_MSI__L1C_20211027T105044_aocs"
                },
                {
                    "type": {
                        "format": "L1C-Pivot",
                        "source": "Sentinel2"
                    },
                    "path": "PRODUCT_S2B_MSI__L1C_20211027T105044_sad3.tar",
                    "id": "PRODUCT_S2B_MSI__L1C_20211027T105044_sad3"
                }
            ],
            "timestamp": 1635331844
        },
        {
            "rasters": [
                {
                    "type": {
                        "format": "L1C-Pivot",
                        "source": "Sentinel2"
                    },
                    "path": "PRODUCT_S2B_MSI__L1C_20220405T105417_e3lg.tar",
                    "id": "PRODUCT_S2B_MSI__L1C_20220405T105417_e3lg"
                },
                {
                    "type": {
                        "format": "L1C-Pivot",
                        "source": "Sentinel2"
                    },
                    "path": "PRODUCT_S2B_MSI__L1C_20220405T105417_ieci.tar",
                    "id": "PRODUCT_S2B_MSI__L1C_20220405T105417_ieci"
                }
            ],
            "timestamp": 1649156057
        },
        {
            "rasters": [
                {
                    "type": {
                        "format": "L1C-Pivot",
                        "source": "Sentinel2"
                    },
                    "path": "PRODUCT_S2B_MSI__L1C_20221005T110639_7ez1.tar",
                    "id": "PRODUCT_S2B_MSI__L1C_20221005T110639_7ez1"
                },
                {
                    "type": {
                        "format": "L1C-Pivot",
                        "source": "Sentinel2"
                    },
                    "path": "PRODUCT_S2B_MSI__L1C_20221005T110639_bj14.tar",
                    "id": "PRODUCT_S2B_MSI__L1C_20221005T110639_bj14"
                }
            ],
            "timestamp": 1664967999
        }
    ],
    "datacube_path": "pivot",
    "roi": "-0.7,42.5,0.3,43.5",
    "bands": [
        {
            "name": "B02",
            "expression": "Pivot.B02"
        }
    ],
    "target_resolution": 10,
    "aliases": [
        {
            "alias": "Pivot",
            "source": "Sentinel2",
            "format": "L1C-Pivot"
        }
    ]
}' http://localhost:8080/cube/build
